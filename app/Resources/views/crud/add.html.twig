{% extends '::base.html.twig' %}
{% block title %}
    {{ parent() }}Ajouter une observation
{% endblock %}
{% block body %}
    <div class="text-center callout ccf">
        <h1 >AJOUTER UNE OBSERVATION</h1>
    </div>
    <div class="row">
        <div id="form-errors">
            {{ form_errors(form) }}
        </div>
        <div class="large-12 row" id="form-add-observation">
            <p id="infoposition"></p>
            {{ form_start(form) }}

            <div class="large-3 columns">
                <div class="large-12">
                    {{ form_widget(form.image, {'attr' : { 'class' : 'large-8 columns'}}) }}
                    <img class="large-4" width="50" src="{{ asset('images/png/oiseau-silhouette.png') }}" alt="">
                </div>

                <div class="large-12" id="information-validation">
                   {% if is_granted("ROLE_AMATEUR") %} <p class="callout round primary">Attention, toute observation doit etre validée par un naturaliste pour être pûbliée</p>{% endif %}
                </div>
            </div>
            <div class="large-7 columns">
                <div class="large-12 columns">
                    {{ form_label(form.specy) }}
                    {{ form_widget(form.specy, {'attr':{'class': 'mapAdd'}}) }}
                    {{ form_errors(form.specy) }}
                </div>
                <div class="large-5 columns">
                    {{ form_label(form.latitude) }}
                    {{ form_widget(form.latitude) }}
                    {{ form_errors(form.latitude) }}
                </div>
                <div class="large-5 columns">
                    {{ form_label(form.longitude) }}
                    {{ form_widget(form.longitude) }}
                    {{ form_errors(form.longitude) }}
                </div>
                <div class="large-2 columns">
                    <a id="changecible"><img src="{{ asset('images/png/gps-localisation.png') }}" alt=""/></a>
                </div>
                <br>

                <div class="columns large-12">
                    <div class="large-12" id="information-curseur">
                        <p class="callout round third">Déplacer le curseur pour récupérer automatiquement les coordonnées</p>
                    </div>
                    {% include "modules/mapAdd.html.twig" %}
                </div>
                <div class="large-12 columns">
                    {{ form_label(form.createdAt) }}
                    {{ form_widget(form.createdAt) }}
                    {{ form_errors(form.createdAt) }}
                </div>
                <div class="large-12 columns">
                    {{ form_label(form.comment) }}
                    {{ form_widget(form.comment) }}
                    {{ form_errors(form.comment) }}
                </div>
                <div class="columns text-center large-12">
                    {{ form_widget(form.save, {'attr' : {'class' : 'button large-2 third' }}) }}
                    <a href="{{ path('app_myobservations') }}" id="annuler-add" class="button large-2 text-center third hollow">ANNULER</a>
                </div>
                {{ form_rest(form) }}
            </div>
            <div class="large-2 columns">

            </div>
        </div>

    </div>
    <script type="text/javascript">
        //Geolocalisation

        $('#changecible').click(function() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    maPosition(position);
                });
            }
        });

        function maPosition(position) {
            document.getElementById("appbundle_observation_latitude").value = position.coords.latitude;
            document.getElementById("appbundle_observation_longitude").value = position.coords.longitude;
        };

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                maPosition(position);
            });
        }
    </script>

{% endblock %}



